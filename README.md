# 0️⃣1️⃣0️⃣0️⃣0️⃣0️⃣1️⃣1️⃣
[![Crates.io Version](https://img.shields.io/crates/v/utf-c?style=flat-square)](https://crates.io/crates/utf-c)
[![MIT License](https://img.shields.io/badge/license-MIT-blue?style=flat-square)](https://github.com/utf-c/rust/blob/main/LICENSE)

UTF-C is a compression for short UTF-8 messages with non-ASCII characters (See the [comparisons](https://github.com/utf-c/rust/edit/main/README.md#comparisons) below).

> [!NOTE]
> Here you can find texts translated with [Google Translate](https://translate.google.com/).

> [!TIP]
> Use our `helper::only_ascii()` function (If possible together with the SIMD feature) to check if the bytes consist only of ASCII characters and skip compression.

## Examples
### `Ζω στην Ευρώπη`
In this example, we were able to remove 6 bytes.

```
Uncompressed(26): [    206, 150, 207, 137, 32, 207, 131, 207, 132, 206, 183, 206, 189, 32, 206, 149, 207, 133, 207, 129, 207, 142, 207, 128, 206, 183]
Compressed(20):   [26, 206, 150, 207, 137, 32,      131,      132, 206, 183,      189, 32,      149, 207, 133,      129,      142,      128, 206, 183]
```

### `私はヨーロッパに住んでいます`
In this example, we were able to remove 13 bytes.

```
Uncompressed(42): [    231, 167, 129, 227, 129, 175, 227, 131, 168, 227, 131, 188, 227, 131, 173, 227, 131, 131, 227, 131, 145, 227, 129, 171, 228, 189, 143, 227, 130, 147, 227, 129, 167, 227, 129, 132 227, 129, 190, 227, 129, 153]
Compressed(29):   [42, 231, 167, 129, 227, 129, 175, 227, 131, 168,           188,           173,           131,           145, 227, 129, 171, 228, 189, 143, 227, 130, 147, 227, 129, 167,           132,          190,           153]
```

## Comparisons
> [!IMPORTANT]
> Please create your own comparison and check if this compression is suitable for your project!

#### 📄 Cargo.toml
```toml
# ...

[dependencies]
# ...
# We will use `GzEncoder`, `Compression::fast()` and `GzDecoder`.
flate2 = { version = "1.0.35", features = ["zlib-ng"], default-features = false }

[profile.release]
strip = true        # Automatically strip symbols from the binary
opt-level = 3       # Optimize for size
lto = true          # Enable link time optimization
codegen-units = 1   # Maximize size reduction optimizations
```

#### 🐧 Raspberry Pi OS Lite (64-bit Debian 12)<sup>Raspberry Pi 5</sup>
<ins>CPU:</ins> Broadcom BCM2712 quad-core Arm Cortex A76 processor @ 2.4GHz
<br>
<ins>SIMD:</ins> NEON
<br>
<ins>RAM:</ins> 1x 4GB LPDDR4X-4267

```
"👁👄👁" compression and decompression 50000x
[gzip  | compression  ] finished after 344757 µs
[gzip  | decompression] finished after 56781 µs
[utf-c | compression  ] finished after 4407 µs
[utf-c | decompression] finished after 3944 µs
===== gzip     (30) =====
[31, 139, 8, 0, 0, 0, 0, 0, 4, 255, 251, 48, 127, 98, 227, 135, 249, 19, 91, 64, 52, 0, 158, 250, 139, 220, 12, 0, 0, 0]
===== utf-c    (7) =====
[12, 240, 159, 145, 129, 132, 129]
===== original (12) =====
[240, 159, 145, 129, 240, 159, 145, 132, 240, 159, 145, 129]
```
```
"Сегодня действительно прекрасный и жаркий день, чтобы пойти на пляж и освежиться в воде 🏊" compression and decompression 50000x
[gzip  | compression  ] finished after 488088 µs
[gzip  | decompression] finished after 137699 µs
[utf-c | compression  ] finished after 74382 µs
[utf-c | decompression] finished after 59852 µs
===== gzip     (179) =====
[31, 139, 8, 0, 0, 0, 0, 0, 4, 255, 187, 176, 240, 194, 214, 11, 155, 47, 236, 187, 176, 229, 194, 222, 139, 253, 10, 23, 182, 92, 216, 122, 97, 231, 197, 198, 139, 77, 23, 54, 93, 216, 113, 177, 233, 194, 214, 11, 187, 47, 246, 92, 216, 123, 97, 159, 194, 133, 253, 23, 27, 46, 108, 189, 176, 235, 98, 195, 133, 13, 23, 27, 47, 236, 189, 216, 125, 97, 167, 194, 133, 29, 10, 23, 182, 93, 216, 112, 177, 225, 194, 174, 11, 59, 64, 124, 144, 254, 189, 23, 123, 116, 20, 46, 182, 95, 108, 186, 176, 239, 194, 198, 139, 221, 10, 23, 246, 95, 216, 119, 97, 231, 197, 38, 144, 226, 189, 23, 54, 128, 248, 187, 47, 246, 95, 216, 6, 214, 189, 239, 98, 227, 133, 77, 23, 182, 94, 216, 6, 178, 238, 98, 207, 197, 70, 144, 43, 54, 41, 92, 216, 4, 118, 211, 86, 133, 15, 243, 251, 187, 0, 169, 204, 87, 215, 165, 0, 0, 0]
===== utf-c    (124) =====
[165, 208, 161, 181, 179, 190, 180, 189, 209, 143, 32, 208, 180, 181, 185, 209, 129, 130, 208, 178, 184, 209, 130, 208, 181, 187, 209, 140, 208, 189, 190, 32, 191, 209, 128, 208, 181, 186, 209, 128, 208, 176, 209, 129, 208, 189, 209, 139, 208, 185, 32, 184, 32, 182, 176, 209, 128, 208, 186, 184, 185, 32, 180, 181, 189, 209, 140, 44, 32, 135, 130, 208, 190, 177, 209, 139, 32, 208, 191, 190, 185, 209, 130, 208, 184, 32, 189, 176, 32, 191, 187, 209, 143, 208, 182, 32, 184, 32, 190, 209, 129, 208, 178, 181, 182, 184, 209, 130, 140, 129, 143, 32, 208, 178, 32, 178, 190, 180, 181, 32, 240, 159, 143, 138]
===== original (165) =====
[208, 161, 208, 181, 208, 179, 208, 190, 208, 180, 208, 189, 209, 143, 32, 208, 180, 208, 181, 208, 185, 209, 129, 209, 130, 208, 178, 208, 184, 209, 130, 208, 181, 208, 187, 209, 140, 208, 189, 208, 190, 32, 208, 191, 209, 128, 208, 181, 208, 186, 209, 128, 208, 176, 209, 129, 208, 189, 209, 139, 208, 185, 32, 208, 184, 32, 208, 182, 208, 176, 209, 128, 208, 186, 208, 184, 208, 185, 32, 208, 180, 208, 181, 208, 189, 209, 140, 44, 32, 209, 135, 209, 130, 208, 190, 208, 177, 209, 139, 32, 208, 191, 208, 190, 208, 185, 209, 130, 208, 184, 32, 208, 189, 208, 176, 32, 208, 191, 208, 187, 209, 143, 208, 182, 32, 208, 184, 32, 208, 190, 209, 129, 208, 178, 208, 181, 208, 182, 208, 184, 209, 130, 209, 140, 209, 129, 209, 143, 32, 208, 178, 32, 208, 178, 208, 190, 208, 180, 208, 181, 32, 240, 159, 143, 138]
```
```
"טקסט זה נדחס עם UTF-C ו-GZIP ולאחר מכן הושווה. טקסט זה תורגם עם Google Translate ואנו מקווים שהוא תורגם כהלכה, אך אין ערובה לכך" compression and decompression 50000x
[gzip  | compression  ] finished after 497616 µs
[gzip  | decompression] finished after 139451 µs
[utf-c | compression  ] finished after 66987 µs
[utf-c | decompression] finished after 63787 µs
===== gzip     (190) =====
[31, 139, 8, 0, 0, 0, 0, 0, 4, 255, 187, 62, 227, 250, 242, 235, 11, 175, 207, 80, 184, 62, 237, 250, 20, 133, 235, 11, 174, 79, 190, 62, 253, 250, 66, 133, 235, 139, 174, 207, 85, 8, 13, 113, 211, 117, 86, 184, 62, 85, 215, 61, 202, 51, 64, 225, 250, 212, 235, 115, 174, 79, 184, 62, 253, 250, 10, 133, 235, 243, 174, 207, 190, 62, 95, 225, 250, 148, 235, 83, 175, 175, 188, 62, 245, 250, 212, 235, 83, 244, 20, 208, 76, 90, 117, 125, 234, 245, 21, 215, 39, 93, 159, 11, 49, 203, 61, 63, 63, 61, 39, 85, 33, 164, 40, 49, 175, 56, 39, 177, 36, 21, 100, 220, 132, 235, 11, 174, 79, 5, 25, 182, 28, 108, 198, 76, 144, 218, 149, 96, 67, 39, 40, 92, 71, 210, 63, 251, 250, 148, 235, 115, 174, 207, 190, 62, 69, 71, 225, 250, 132, 235, 179, 64, 196, 76, 144, 245, 139, 174, 175, 184, 62, 245, 250, 68, 144, 187, 65, 210, 179, 0, 35, 180, 233, 188, 204, 0, 0, 0]
===== utf-c    (129) =====
[204, 215, 152, 167, 161, 152, 32, 150, 148, 32, 160, 147, 151, 161, 32, 162, 157, 32, 85, 84, 70, 45, 67, 32, 149, 45, 71, 90, 73, 80, 32, 149, 156, 144, 151, 168, 32, 158, 155, 159, 32, 148, 149, 169, 149, 149, 148, 46, 32, 152, 167, 161, 152, 32, 150, 148, 32, 170, 149, 168, 146, 157, 32, 162, 157, 32, 71, 111, 111, 103, 108, 101, 32, 84, 114, 97, 110, 115, 108, 97, 116, 101, 32, 149, 144, 160, 149, 32, 158, 167, 149, 149, 153, 157, 32, 169, 148, 149, 144, 32, 170, 149, 168, 146, 157, 32, 155, 148, 156, 155, 148, 44, 32, 144, 154, 32, 144, 153, 159, 32, 162, 168, 149, 145, 148, 32, 156, 155, 154]
===== original (204) =====
[215, 152, 215, 167, 215, 161, 215, 152, 32, 215, 150, 215, 148, 32, 215, 160, 215, 147, 215, 151, 215, 161, 32, 215, 162, 215, 157, 32, 85, 84, 70, 45, 67, 32, 215, 149, 45, 71, 90, 73, 80, 32, 215, 149, 215, 156, 215, 144, 215, 151, 215, 168, 32, 215, 158, 215, 155, 215, 159, 32, 215, 148, 215, 149, 215, 169, 215, 149, 215, 149, 215, 148, 46, 32, 215, 152, 215, 167, 215, 161, 215, 152, 32, 215, 150, 215, 148, 32, 215, 170, 215, 149, 215, 168, 215, 146, 215, 157, 32, 215, 162, 215, 157, 32, 71, 111, 111, 103, 108, 101, 32, 84, 114, 97, 110, 115, 108, 97, 116, 101, 32, 215, 149, 215, 144, 215, 160, 215, 149, 32, 215, 158, 215, 167, 215, 149, 215, 149, 215, 153, 215, 157, 32, 215, 169, 215, 148, 215, 149, 215, 144, 32, 215, 170, 215, 149, 215, 168, 215, 146, 215, 157, 32, 215, 155, 215, 148, 215, 156, 215, 155, 215, 148, 44, 32, 215, 144, 215, 154, 32, 215, 144, 215, 153, 215, 159, 32, 215, 162, 215, 168, 215, 149, 215, 145, 215, 148, 32, 215, 156, 215, 155, 215, 154]
```

#### 🪟 Windows 11 Pro (24H2)
<ins>CPU:</ins> Intel Core i5-14400f (10c/16t)
<br>
<ins>SIMD:</ins> SSE2 | AVX2
<br>
<ins>RAM:</ins> 2x 8GB DDR4-3600

```
"👁👄👁" compression and decompression 50000x
[gzip  | compression  ] finished after 240902 µs
[gzip  | decompression] finished after 33640 µs
[utf-c | compression  ] finished after 1779 µs
[utf-c | decompression] finished after 1951 µs
===== gzip     (30) =====
[31, 139, 8, 0, 0, 0, 0, 0, 4, 255, 251, 48, 127, 98, 227, 135, 249, 19, 91, 64, 52, 0, 158, 250, 139, 220, 12, 0, 0, 0]
===== utf-c    (7) =====
[12, 240, 159, 145, 129, 132, 129]
===== original (12) =====
[240, 159, 145, 129, 240, 159, 145, 132, 240, 159, 145, 129]
```
```
"Сегодня действительно прекрасный и жаркий день, чтобы пойти на пляж и освежиться в воде 🏊" compression and decompression 50000x
[gzip  | compression  ] finished after 332430 µs
[gzip  | decompression] finished after 106248 µs
[utf-c | compression  ] finished after 22295 µs
[utf-c | decompression] finished after 19777 µs
===== gzip     (179) =====
[31, 139, 8, 0, 0, 0, 0, 0, 4, 255, 187, 176, 240, 194, 214, 11, 155, 47, 236, 187, 176, 229, 194, 222, 139, 253, 10, 23, 182, 92, 216, 122, 97, 231, 197, 198, 139, 77, 23, 54, 93, 216, 113, 177, 233, 194, 214, 11, 187, 47, 246, 92, 216, 123, 97, 159, 194, 133, 253, 23, 27, 46, 108, 189, 176, 235, 98, 195, 133, 13, 23, 27, 47, 236, 189, 216, 125, 97, 167, 194, 133, 29, 10, 23, 182, 93, 216, 112, 177, 225, 194, 174, 11, 59, 64, 124, 144, 254, 189, 23, 123, 116, 20, 46, 182, 95, 108, 186, 176, 239, 194, 198, 139, 221, 10, 23, 246, 95, 216, 119, 97, 231, 197, 38, 144, 226, 189, 23, 54, 128, 248, 187, 47, 246, 95, 216, 6, 214, 189, 239, 98, 227, 133, 77, 23, 182, 94, 216, 6, 178, 238, 98, 207, 197, 70, 144, 43, 54, 41, 92, 216, 4, 118, 211, 86, 133, 15, 243, 251, 187, 0, 169, 204, 87, 215, 165, 0, 0, 0]
===== utf-c    (124) =====
[165, 208, 161, 181, 179, 190, 180, 189, 209, 143, 32, 208, 180, 181, 185, 209, 129, 130, 208, 178, 184, 209, 130, 208, 181, 187, 209, 140, 208, 189, 190, 32, 191, 209, 128, 208, 181, 186, 209, 128, 208, 176, 209, 129, 208, 189, 209, 139, 208, 185, 32, 184, 32, 182, 176, 209, 128, 208, 186, 184, 185, 32, 180, 181, 189, 209, 140, 44, 32, 135, 130, 208, 190, 177, 209, 139, 32, 208, 191, 190, 185, 209, 130, 208, 184, 32, 189, 176, 32, 191, 187, 209, 143, 208, 182, 32, 184, 32, 190, 209, 129, 208, 178, 181, 182, 184, 209, 130, 140, 129, 143, 32, 208, 178, 32, 178, 190, 180, 181, 32, 240, 159, 143, 138]
===== original (165) =====
[208, 161, 208, 181, 208, 179, 208, 190, 208, 180, 208, 189, 209, 143, 32, 208, 180, 208, 181, 208, 185, 209, 129, 209, 130, 208, 178, 208, 184, 209, 130, 208, 181, 208, 187, 209, 140, 208, 189, 208, 190, 32, 208, 191, 209, 128, 208, 181, 208, 186, 209, 128, 208, 176, 209, 129, 208, 189, 209, 139, 208, 185, 32, 208, 184, 32, 208, 182, 208, 176, 209, 128, 208, 186, 208, 184, 208, 185, 32, 208, 180, 208, 181, 208, 189, 209, 140, 44, 32, 209, 135, 209, 130, 208, 190, 208, 177, 209, 139, 32, 208, 191, 208, 190, 208, 185, 209, 130, 208, 184, 32, 208, 189, 208, 176, 32, 208, 191, 208, 187, 209, 143, 208, 182, 32, 208, 184, 32, 208, 190, 209, 129, 208, 178, 208, 181, 208, 182, 208, 184, 209, 130, 209, 140, 209, 129, 209, 143, 32, 208, 178, 32, 208, 178, 208, 190, 208, 180, 208, 181, 32, 240, 159, 143, 138]
```
```
"טקסט זה נדחס עם UTF-C ו-GZIP ולאחר מכן הושווה. טקסט זה תורגם עם Google Translate ואנו מקווים שהוא תורגם כהלכה, אך אין ערובה לכך" compression and decompression 50000x
[gzip  | compression  ] finished after 355712 µs
[gzip  | decompression] finished after 111791 µs
[utf-c | compression  ] finished after 19107 µs
[utf-c | decompression] finished after 20951 µs
===== gzip     (190) =====
[31, 139, 8, 0, 0, 0, 0, 0, 4, 255, 187, 62, 227, 250, 242, 235, 11, 175, 207, 80, 184, 62, 237, 250, 20, 133, 235, 11, 174, 79, 190, 62, 253, 250, 66, 133, 235, 139, 174, 207, 85, 8, 13, 113, 211, 117, 86, 184, 62, 85, 215, 61, 202, 51, 64, 225, 250, 212, 235, 115, 174, 79, 184, 62, 253, 250, 10, 133, 235, 243, 174, 207, 190, 62, 95, 225, 250, 148, 235, 83, 175, 175, 188, 62, 245, 250, 212, 235, 83, 244, 20, 208, 76, 90, 117, 125, 234, 245, 21, 215, 39, 93, 159, 11, 49, 203, 61, 63, 63, 61, 39, 85, 33, 164, 40, 49, 175, 56, 39, 177, 36, 21, 100, 220, 132, 235, 11, 174, 79, 5, 25, 182, 28, 108, 198, 76, 144, 218, 149, 96, 67, 39, 40, 92, 71, 210, 63, 251, 250, 148, 235, 115, 174, 207, 190, 62, 69, 71, 225, 250, 132, 235, 179, 64, 196, 76, 144, 245, 139, 174, 175, 184, 62, 245, 250, 68, 144, 187, 65, 210, 179, 0, 35, 180, 233, 188, 204, 0, 0, 0]
===== utf-c    (129) =====
[204, 215, 152, 167, 161, 152, 32, 150, 148, 32, 160, 147, 151, 161, 32, 162, 157, 32, 85, 84, 70, 45, 67, 32, 149, 45, 71, 90, 73, 80, 32, 149, 156, 144, 151, 168, 32, 158, 155, 159, 32, 148, 149, 169, 149, 149, 148, 46, 32, 152, 167, 161, 152, 32, 150, 148, 32, 170, 149, 168, 146, 157, 32, 162, 157, 32, 71, 111, 111, 103, 108, 101, 32, 84, 114, 97, 110, 115, 108, 97, 116, 101, 32, 149, 144, 160, 149, 32, 158, 167, 149, 149, 153, 157, 32, 169, 148, 149, 144, 32, 170, 149, 168, 146, 157, 32, 155, 148, 156, 155, 148, 44, 32, 144, 154, 32, 144, 153, 159, 32, 162, 168, 149, 145, 148, 32, 156, 155, 154]
===== original (204) =====
[215, 152, 215, 167, 215, 161, 215, 152, 32, 215, 150, 215, 148, 32, 215, 160, 215, 147, 215, 151, 215, 161, 32, 215, 162, 215, 157, 32, 85, 84, 70, 45, 67, 32, 215, 149, 45, 71, 90, 73, 80, 32, 215, 149, 215, 156, 215, 144, 215, 151, 215, 168, 32, 215, 158, 215, 155, 215, 159, 32, 215, 148, 215, 149, 215, 169, 215, 149, 215, 149, 215, 148, 46, 32, 215, 152, 215, 167, 215, 161, 215, 152, 32, 215, 150, 215, 148, 32, 215, 170, 215, 149, 215, 168, 215, 146, 215, 157, 32, 215, 162, 215, 157, 32, 71, 111, 111, 103, 108, 101, 32, 84, 114, 97, 110, 115, 108, 97, 116, 101, 32, 215, 149, 215, 144, 215, 160, 215, 149, 32, 215, 158, 215, 167, 215, 149, 215, 149, 215, 153, 215, 157, 32, 215, 169, 215, 148, 215, 149, 215, 144, 32, 215, 170, 215, 149, 215, 168, 215, 146, 215, 157, 32, 215, 155, 215, 148, 215, 156, 215, 155, 215, 148, 44, 32, 215, 144, 215, 154, 32, 215, 144, 215, 153, 215, 159, 32, 215, 162, 215, 168, 215, 149, 215, 145, 215, 148, 32, 215, 156, 215, 155, 215, 154]
```